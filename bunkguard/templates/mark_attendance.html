{% extends "base.html" %}
{% block title %}Mark Attendance - BunkGuard{% endblock %}

{% block content %}
<div class="page-header">
    <div class="header-text">
        <h1>Mark Today's Attendance</h1>
        <p>Your schedule for {{ now.strftime('%A, %B %d, %Y') }}.</p>
    </div>
    <div class="card-actions">
        <button class="btn-present" data-id="${sub._id.$oid}" data-status="present">Present</button>
        <button class="btn-absent" data-id="${sub._id.$oid}" data-status="absent">Absent</button>
        <div class="more-options">
            <button class="options-btn" data-id="${sub._id.$oid}"><i class='bx bx-dots-horizontal-rounded'></i></button>
            <div class="options-menu hidden">
                <a href="#" data-status="pending_medical">Medical Leave</a>
                <a href="#" data-status="cancelled">Cancelled</a>
                <a href="#" data-status="substituted">Substituted</a>
            </div>
        </div>
    </div>
</div>

<div class="attendance-list-container" id="attendanceList">
</div>
<div id="substitutionModal" class="modal-overlay hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Which class was taken instead?</h2>
            <button id="closeSubstitutionModalBtn" class="close-btn">&times;</button>
        </div>
        <div id="substitutionSubjectList" class="subject-grid">
        </div>
    </div>
</div>
{% endblock %}

{% block body_scripts %}
<script src="{{ url_for('static', filename='mark_attendance.js') }}"></script>
{% endblock %}